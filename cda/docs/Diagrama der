
erDiagram

    PERFIL ||--o{ USUARIO : possui

    USUARIO ||--o| COLABORADOR : vincula

    CARGO ||--o{ COLABORADOR : ocupa

    COLABORADOR ||--o{ COLABORADOR : "gerencia"

    CICLO_DESEMPENHO ||--o{ CICLO_COLABORADOR : contem

    COLABORADOR ||--o{ CICLO_COLABORADOR : participa

    CICLO_COLABORADOR ||--o{ AVALIACAO : recebe

    COLABORADOR ||--o{ AVALIACAO : avalia

    AVALIACAO ||--o{ PONTUACAO : possui

    COMPETENCIA ||--o{ PONTUACAO : avaliada

    META ||--o{ PONTUACAO : avaliada

    CICLO_COLABORADOR ||--|| NINE_BOX : consolida

    PLANO_CARREIRA ||--o{ COLABORADOR_TRILHA : define

    COLABORADOR ||--o{ COLABORADOR_TRILHA : segue

    %% ====== ENTIDADES ======

    PERFIL {
        bigint id PK
        varchar nome
        text descricao
        timestamptz created_at
    }

    USUARIO {
        bigint id PK
        varchar email
        varchar nome
        text senha
        bigint perfil_id FK
    }

    CARGO {
        bigint id PK
        varchar titulo
        text descricao
    }

    COLABORADOR {
        bigint id PK
        bigint usuario_id FK
        bigint cargo_id FK
        bigint gestor_id FK
        varchar matricula
        boolean ativo
    }

    CICLO_DESEMPENHO {
        bigint id PK
        varchar nome
        date data_inicio
        date data_fim
        bigint criado_por FK
    }

    CICLO_COLABORADOR {
        bigint id PK
        bigint ciclo_id FK
        bigint colaborador_id FK
        varchar status_experiencia
    }

    AVALIACAO {
        bigint id PK
        bigint ciclo_colaborador_id FK
        bigint avaliador_id FK
        varchar tipo
        varchar status
        numeric pontuacao_merito
    }

    PONTUACAO {
        bigint id PK
        bigint avaliacao_id FK
        bigint competencia_id FK
        bigint meta_id FK
        numeric nota
        numeric peso_aplicado
    }

    COMPETENCIA {
        bigint id PK
        varchar nome
        varchar categoria
        numeric peso
    }

    META {
        bigint id PK
        varchar titulo
        numeric peso
        date prazo
    }

    NINE_BOX {
        bigint id PK
        bigint ciclo_colaborador_id FK
        numeric score_final_merito
        boolean elegivel_carreira
    }

    PLANO_CARREIRA {
        bigint id PK
        varchar nome
        varchar versao
        boolean publicado
    }

    COLABORADOR_TRILHA {
        bigint id PK
        bigint plano_id FK
        bigint colaborador_id FK
        varchar status
    }

    COLABORADOR_IMPORT {
        bigint id PK
        varchar matricula
        varchar email_corporativo
        varchar status_processamento
    }
